<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bitácora Debug</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <style>
        body { background-color: #0f172a; color: white; min-height: 100vh; padding: 20px; font-family: sans-serif; }
        .hidden-tab { display: none; }
        .active-btn { background-color: #3b82f6; color: white; border-color: #3b82f6; }
    </style>
</head>
<body>

    <div id="error-console" class="hidden bg-red-900/80 border border-red-500 p-4 rounded mb-4 text-red-200 font-mono text-sm"></div>

    <header class="max-w-6xl mx-auto mb-8 border-b border-gray-700 pb-6">
        <h1 class="text-3xl font-bold mb-4 flex items-center gap-3">
            <span class="material-icons-round text-blue-500">terminal</span>
            Bitácora de Sistemas
        </h1>
        <div id="tabs-menu" class="flex flex-wrap gap-2">
            </div>
    </header>

    <main id="main-content" class="max-w-6xl mx-auto">
        <p class="text-gray-500 italic">Selecciona una carpeta arriba...</p>
    </main>

    <script>
        // BLOQUE TRY-CATCH PARA DETECTAR ERRORES
        try {
            
            /**
             * CONFIGURACIÓN DE DATOS
             * ¡CUIDADO CON LAS COMAS Y COMILLAS!
             */
            const DATA = [
                {
                    id: "carpeta1", 
                    folder: "Mac mini", 
                    files: [
                        {
                            // PRUEBA CON UNA IMAGEN QUE SEPAS QUE EXISTE
                            src: "./media/files/Mac mini/foto1.jpg", 
                            title: "Foto de prueba",
                            desc: "Descripción de prueba."
                        }
                    ]
                }, // <--- ¡ESTA COMA ES IMPORTANTE SI AÑADES OTRO BLOQUE!
                {
                    id: "carpeta2",
                    folder: "Raspberry",
                    files: [
                        {
                            src: "./media/files/Raspberry/montaje.jpg", 
                            title: "Montaje",
                            desc: "Prueba de raspberry."
                        }
                    ]
                }
            ];

            // LÓGICA
            const menu = document.getElementById('tabs-menu');
            const content = document.getElementById('main-content');
            
            if(!menu || !content) throw new Error("No encuentro los elementos HTML");

            DATA.forEach((section, index) => {
                // Crear Botón
                const btn = document.createElement('button');
                btn.className = `px-4 py-2 rounded border border-gray-600 hover:bg-gray-800 transition ${index === 0 ? 'bg-blue-600 border-blue-600' : ''}`;
                btn.textContent = section.folder;
                btn.onclick = () => {
                    document.querySelectorAll('button').forEach(b => b.classList.remove('bg-blue-600', 'border-blue-600'));
                    btn.classList.add('bg-blue-600', 'border-blue-600');
                    renderFiles(section.files);
                };
                menu.appendChild(btn);
            });

            // Función para pintar fotos
            function renderFiles(files) {
                content.innerHTML = `<div class="grid grid-cols-1 md:grid-cols-2 gap-6 animate-fade-in">
                    ${files.map(f => `
                        <div class="bg-slate-800 rounded-xl overflow-hidden border border-slate-700">
                            <div class="h-64 bg-black flex items-center justify-center overflow-hidden">
                                <img src="${f.src}" class="object-contain w-full h-full" alt="${f.title}" 
                                onerror="this.src='https://placehold.co/600x400/000000/FFF?text=Error+Ruta'">
                            </div>
                            <div class="p-4">
                                <h3 class="font-bold text-lg text-white">${f.title}</h3>
                                <p class="text-gray-400 text-sm mt-1">${f.desc}</p>
                                <div class="mt-2 text-xs text-blue-400 font-mono bg-blue-900/30 p-1 rounded inline-block">${f.src}</div>
                            </div>
                        </div>
                    `).join('')}
                </div>`;
            }

            // Cargar la primera pestaña por defecto
            if(DATA.length > 0) renderFiles(DATA[0].files);

        } catch (error) {
            // SI HAY ERROR, LO MOSTRAMOS EN PANTALLA
            const consoleBox = document.getElementById('error-console');
            consoleBox.classList.remove('hidden');
            consoleBox.innerHTML = `<strong>⚠️ ERROR DE CÓDIGO DETECTADO:</strong><br>${error.message}`;
            console.error(error);
        }
    </script>
</body>
</html>