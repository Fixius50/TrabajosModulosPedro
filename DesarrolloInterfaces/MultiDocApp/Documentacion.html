<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MultiDocApp - Documentaci√≥n del Proyecto</title>
    <style>
        :root {
            --bg: #0d1117;
            --bg-secondary: #161b22;
            --border: #30363d;
            --text: #c9d1d9;
            --text-secondary: #8b949e;
            --accent: #58a6ff;
            --accent-glow: rgba(88, 166, 255, 0.15);
            --success: #3fb950;
            --warning: #d29922;
            --error: #f85149;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            font-size: 16px;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            font-size: 1rem;
        }

        nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: var(--bg-secondary);
            border-bottom: 0.0625rem solid var(--border);
            z-index: 100;
            backdrop-filter: blur(0.75rem);
        }

        nav ul {
            display: flex;
            gap: 0.5rem;
            padding: 1rem 1.5rem;
            list-style: none;
            overflow-x: auto;
        }

        nav a {
            color: var(--text-secondary);
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.2s;
            white-space: nowrap;
        }

        nav a:hover,
        nav a.active {
            color: var(--accent);
            background: var(--accent-glow);
        }

        main {
            max-width: 75rem;
            margin: 0 auto;
            padding: 6.25rem 1.5rem 3.75rem;
        }

        section {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        section.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(0.625rem);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            font-size: clamp(1.75rem, 5vw, 2.5rem);
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, var(--accent), #a371f7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: clamp(0.9rem, 2vw, 1.1rem);
            margin-bottom: 2rem;
        }

        h2 {
            font-size: clamp(1.2rem, 3vw, 1.5rem);
            color: var(--text);
            margin: 2rem 0 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 0.0625rem solid var(--border);
        }

        h3 {
            font-size: clamp(0.95rem, 2vw, 1.1rem);
            color: var(--accent);
            margin: 1.5rem 0 0.75rem;
        }

        p {
            margin-bottom: 1rem;
            color: var(--text-secondary);
        }

        .card {
            background: var(--bg-secondary);
            border: 0.0625rem solid var(--border);
            border-radius: 0.75rem;
            padding: 1.25rem;
            margin-bottom: 1rem;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .card-title {
            font-weight: 600;
            color: var(--text);
        }

        .tag {
            display: inline-block;
            padding: 0.25rem 0.625rem;
            border-radius: 0.75rem;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .tag-tech {
            background: rgba(163, 113, 247, 0.2);
            color: #a371f7;
        }

        .tag-feature {
            background: rgba(63, 185, 80, 0.2);
            color: var(--success);
        }

        .tag-file {
            background: rgba(88, 166, 255, 0.2);
            color: var(--accent);
        }

        .tag-ai {
            background: rgba(210, 153, 34, 0.2);
            color: var(--warning);
        }

        .prompt-box {
            background: #0d1117;
            border: 0.0625rem solid var(--border);
            border-radius: 0.5rem;
            padding: 1rem;
            font-family: 'Fira Code', monospace;
            font-size: 0.8125rem;
            white-space: pre-wrap;
            color: var(--text-secondary);
            max-height: 18.75rem;
            overflow-y: auto;
        }

        code {
            background: var(--bg);
            padding: 0.125rem 0.375rem;
            border-radius: 0.25rem;
            font-family: 'Fira Code', monospace;
            font-size: 0.9em;
            color: var(--accent);
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(min(17.5rem, 100%), 1fr));
            gap: 1rem;
        }

        .stat {
            text-align: center;
            padding: 1.5rem;
            background: var(--bg-secondary);
            border: 0.0625rem solid var(--border);
            border-radius: 0.75rem;
        }

        .stat-value {
            font-size: clamp(1.75rem, 5vw, 2.5rem);
            font-weight: 700;
            color: var(--accent);
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }

        th,
        td {
            text-align: left;
            padding: 0.75rem;
            border-bottom: 0.0625rem solid var(--border);
        }

        th {
            color: var(--text-secondary);
            font-weight: 500;
            font-size: 0.8125rem;
        }

        .file-tree {
            font-family: 'Fira Code', monospace;
            font-size: 0.8125rem;
            background: var(--bg);
            padding: 1rem;
            border-radius: 0.5rem;
            border: 0.0625rem solid var(--border);
            overflow-x: auto;
        }

        .file-tree .folder {
            color: var(--warning);
        }

        .file-tree .file {
            color: var(--text-secondary);
        }

        .file-tree .file-new {
            color: var(--success);
        }

        .file-tree .file-modified {
            color: var(--accent);
        }

        ul {
            color: var(--text-secondary);
            padding-left: 1.5rem;
        }

        li {
            margin-bottom: 0.25rem;
        }

        @media (max-width: 600px) {
            main {
                padding: 5rem 1rem 2rem;
            }

            nav ul {
                padding: 0.75rem 1rem;
            }
        }
    </style>
</head>

<body>
    <nav>
        <ul>
            <li><a href="#overview" class="active" onclick="showSection('overview')">üìä Overview</a></li>
            <li><a href="#prompts" onclick="showSection('prompts')">üí¨ Prompts</a></li>
            <li><a href="#features" onclick="showSection('features')">‚ú® Funcionalidades</a></li>
            <li><a href="#files" onclick="showSection('files')">üìÅ Archivos</a></li>
            <li><a href="#tech" onclick="showSection('tech')">üõ†Ô∏è Tecnolog√≠as</a></li>
        </ul>
    </nav>

    <main>
        <!-- OVERVIEW -->
        <section id="overview" class="active">
            <h1>MultiDocApp</h1>
            <p class="subtitle">Gestor de documentos multimedia con sincronizaci√≥n en la nube</p>

            <div class="grid">
                <div class="stat">
                    <div class="stat-value">25+</div>
                    <div class="stat-label">Componentes React</div>
                </div>
                <div class="stat">
                    <div class="stat-value">11</div>
                    <div class="stat-label">Tipos de archivo</div>
                </div>
                <div class="stat">
                    <div class="stat-value">10+</div>
                    <div class="stat-label">Fases de desarrollo</div>
                </div>
            </div>

            <h2>Resumen del Proyecto</h2>
            <p>MultiDocApp es una aplicaci√≥n web moderna para gestionar documentos multimedia de diversos tipos
                (im√°genes, videos, PDFs, c√≥digo, etc.) con soporte para carpetas jer√°rquicas, papelera, sincronizaci√≥n
                con Supabase, y autenticaci√≥n de usuarios.</p>

            <h3>Caracter√≠sticas Principales</h3>
            <ul>
                <li>üìÅ Sistema de carpetas con navegaci√≥n jer√°rquica y breadcrumbs</li>
                <li>üóëÔ∏è Papelera con restauraci√≥n y eliminaci√≥n permanente</li>
                <li>üé® Editor multimedia (brillo, contraste, saturaci√≥n, rotaci√≥n)</li>
                <li>üìù Editor de c√≥digo con syntax highlighting (Monaco Editor)</li>
                <li>‚òÅÔ∏è Sincronizaci√≥n bidireccional con Supabase</li>
                <li>üîê Autenticaci√≥n con email/contrase√±a y Google OAuth</li>
                <li>üåì Modo claro/oscuro</li>
                <li>üì± Sidebar colapsable responsive</li>
            </ul>
        </section>

        <!-- PROMPTS -->
        <section id="prompts">
            <h1>Historial de Prompts</h1>
            <p class="subtitle">Todos los prompts utilizados durante el desarrollo con IA</p>

            <div class="card">
                <div class="card-header">
                    <span class="card-title">Prompt Inicial - Rol Maestro</span>
                    <span class="tag tag-ai">IA Base</span>
                </div>
                <div class="prompt-box"># ROL MAESTRO
                    Act√∫a como un **Lead Full-Stack Engineer & Cloud Architect**.
                    Tu misi√≥n es construir la arquitectura completa (Cliente y Servidor) aplicando **Ingenier√≠a
                    Defensiva**, **Seguridad por Dise√±o** e **Investigaci√≥n Profunda**.

                    # ESTRUCTURA DE ARCHIVOS
                    üìÇ `[NombreProyecto]App/`
                    ‚îú‚îÄ‚îÄ üìÑ `.gitignore` (MANDATORIO: Define exclusiones est√°ndar como node_modules, .env, logs)
                    ‚îú‚îÄ‚îÄ üìÇ `App/` (Frontend)
                    ‚îÇ ‚îú‚îÄ‚îÄ üìÑ `index.html` (o `[NombreLogico].html`)
                    ‚îÇ ‚îî‚îÄ‚îÄ üìÇ [LIBERTAD TOTAL]: Crea subcarpetas (css, js, assets) aqu√≠.
                    ‚îî‚îÄ‚îÄ üìÇ `Server/` (Backend - Opcional)
                    ‚îú‚îÄ‚îÄ üìÑ `server.js` (o `main.py`, etc.)
                    ‚îú‚îÄ‚îÄ üìÑ `.env.example`
                    ‚îî‚îÄ‚îÄ üìÇ [LIBERTAD TOTAL]: Routes, controllers, models.

                    ---

                    # FLUJO DE TRABAJO
                    Antes de escribir c√≥digo:

                    1. **FASE 0: ENTENDIMIENTO Y DATOS (Consulta Cr√≠tica):**
                    * ¬øTienes un MANIFIESTO DE CONTEXTO? √ösalo como verdad. Si no, hazme preguntas sobre Prop√≥sito y
                    Flujo.
                    * **ESTRATEGIA DE DATOS (MANDATORIO):** Preg√∫ntame expl√≠citamente:
                    * "¬øQu√© persistencia prefieres? **Local** (JSON, XML) o **Nube** (Supabase, Firebase, Otros)."
                    * "Si es Nube: ¬øTienes documentaci√≥n o enlaces de referencia? P√©galos aqu√≠."
                    * "Si es Nube: ¬øQu√© tablas/colecciones necesitamos? (Si no lo sabes, p√≠demelo)."
                    * **Regla de Autonom√≠a:** Si mi respuesta es vaga, deduce la funcionalidad para un MVP robusto y
                    avanza.

                    2. **FASE DE ESTRATEGIA (Stack & Fallback):**
                    * **Selecci√≥n de Stack:** Elige tecnolog√≠as.
                    * **Plan B (Fallbacks):** Define alternativas (ej: JSON local si la API de Nube falla).

                    3. **FASE PRE-CHECK (Matriz de Riesgos):**
                    * **Integraci√≥n:** CORS, Endpoints, Estructura de Datos.
                    * **Seguridad:** Inyecciones, XSS, Secretos.
                    * **Gesti√≥n de Archivos:** Define qu√© se ignora en `.gitignore`.

                    4. **FASE EJECUCI√ìN (CONSTRUCCI√ìN PROGRESIVA):**
                    * **Paso A (Estructura):** Define mentalmente la lista completa de archivos a crear.
                    * **Paso B (Generaci√≥n Escalonada):** Genera el c√≥digo **archivo por archivo, ordenados del m√°s
                    sencillo al m√°s complicado**.
                    * **Lectura de Coherencia:** Al generar cada archivo, "lee" los anteriores para asegurar coherencia.

                    ---

                    # SUB-ROLES T√âCNICOS
                    1. **Frontend (`App/`):** UX/UI Pixel-Perfect. Web-First. Testable en Chromium.
                    2. **Backend (`Server/`):** Seguridad primero (API Keys en env). Validaci√≥n estricta (Zod/Joi).
                    * **Protocolo de Base de Datos Perdida:** Si durante la creaci√≥n definimos usar una BBDD en la nube
                    pero **NO se proporcionan las API Keys**, implementa autom√°ticamente un **Fallback a Base de Datos
                    Local**.
                    3. **Terminal:** Tienes libertad total para indicarme los comandos de terminal necesarios.

                    ---

                    # FORMATO DE SALIDA
                    1. **Archivos de C√≥digo:** Bloques con ruta relativa (incluyendo `.gitignore`).
                    2. **Instrucciones de Terminal:** Comandos claros para ponerlo en marcha.
                    3. **REPORTE DE TRANSICI√ìN (Obligatorio):**
                    * Stack Completo: Front, Back y Estrategia de Datos.
                    * Estado BBDD: Indica si se us√≥ la real o el Fallback Local.
                    * Riesgos Mitigados: Medidas de seguridad.
                    * Resumen del Prompt: Para el historial.</div>
            </div>

            <div class="card">
                <div class="card-header">
                    <span class="card-title">Arquitectura del Proyecto</span>
                    <span class="tag tag-ai">IA</span>
                </div>
                <div class="prompt-box">Adaptar la arquitectura de MultiDocApp seg√∫n el "Ejemplo simple" (Antigravity
                    Workstation), priorizando todas las funcionalidades excepto la vista 3D y temas.</div>
            </div>

            <div class="card">
                <div class="card-header">
                    <span class="card-title">Correcci√≥n de bugs de rendimiento</span>
                    <span class="tag tag-ai">IA</span>
                </div>
                <div class="prompt-box">Hay problemas de renderizado en el dashboard cuando hay bastantes archivos;
                    estos errores indican que se estan recorriendo 1 por 1 en un orden y por eso al hacer alguna accion
                    tarda en cambiar, como eliminarlo o fijarlo</div>
            </div>

            <div class="card">
                <div class="card-header">
                    <span class="card-title">Mejora del Editor</span>
                    <span class="tag tag-ai">IA</span>
                </div>
                <div class="prompt-box">cambia el font size a unidades relativas a la pantalla, y que al menos sea
                    grande; a√±ade tambien dentro del editor mas caracteristicas (me gustar√≠a que fuera como un editor de
                    codigo, que detecte codigo y le cambie el color segun el tipo de codigo por ejemplo)</div>
            </div>

            <div class="card">
                <div class="card-header">
                    <span class="card-title">Layout del Editor</span>
                    <span class="tag tag-ai">IA</span>
                </div>
                <div class="prompt-box">pero dentro del editor, quiero que el ancho lo ocupe centradamente un 75% de la
                    pantalla, y el alto todo el 100% de lo que ocupe el codigo en la pantalla, pero de minimo el 100% de
                    la pantalla; asi parece un editor</div>
            </div>

            <div class="card">
                <div class="card-header">
                    <span class="card-title">Sidebar Colapsable</span>
                    <span class="tag tag-ai">IA</span>
                </div>
                <div class="prompt-box">esto es lo que sale al abrir cualquier documento de texto, si el zoom por
                    defecto es 100% lo suyo es que la fuente de texto se vea grande. Luego me gustaria que la barra
                    lateral se ocultase por defecto, pero se abriera al pasar el raton por encima (o que se deslice si
                    es la version de movil)</div>
            </div>

            <div class="card">
                <div class="card-header">
                    <span class="card-title">Sincronizaci√≥n Cloud y Auth</span>
                    <span class="tag tag-ai">IA</span>
                </div>
                <div class="prompt-box">si; aparte quiero gestionar la base de datos desde la app, por ejemplo si quiero
                    que se elimine en la nube, o si quiero que se quede alli y no se descargue aqui. Aparte me gustar√≠a
                    implementar el login local con correo, o con google.</div>
            </div>

            <div class="card">
                <div class="card-header">
                    <span class="card-title">Documentaci√≥n SPA</span>
                    <span class="tag tag-ai">IA</span>
                </div>
                <div class="prompt-box">Por ultimo me gustar√≠a que crearas al lado de la carpeta App una recopilacion de
                    todos los prompts (textos tal cual te he puesto) que hagan el dise√±o de la web, sus funcionalidades
                    UX/UI, el archivo/s de codigo o configuracion/es que haga eso, y las tecnolog√≠as usadas (IA,
                    frameworks, librer√≠as...). Esta recopilaci√≥n me gustar√≠a que fuera una SPA .html</div>
            </div>

            <div class="card">
                <div class="card-header">
                    <span class="card-title">Robustez y Ejecuci√≥n en Editor</span>
                    <span class="tag tag-ai">IA</span>
                </div>
                <div class="prompt-box">hazlo mas robusto el editor de codigo; quiero que salte las posibles palabras
                    clave... hay errores en el compilador... mira librerias que se encarguen de indicar que la sintaxis
                    esta bien</div>
            </div>

            <div class="card">
                <div class="card-header">
                    <span class="card-title">Control Manual de Guardado</span>
                    <span class="tag tag-ai">IA</span>
                </div>
                <div class="prompt-box">parece que el error persiste, creo que es que se queda de la cache... saca el
                    autoguardado del editor de codigo para evitar conflictos de sincronizaci√≥n mientras escribo</div>
            </div>
        </section>

        <!-- FEATURES -->
        <section id="features">
            <h1>Funcionalidades UX/UI</h1>
            <p class="subtitle">Todas las caracter√≠sticas implementadas organizadas por categor√≠a</p>

            <h2>üìÅ Sistema de Archivos</h2>
            <div class="grid">
                <div class="card">
                    <span class="tag tag-feature">Dashboard</span>
                    <h3>Vista Principal</h3>
                    <p>Grid/List view con b√∫squeda, filtros por tipo y tama√±o, y clasificaci√≥n autom√°tica por extensi√≥n.
                    </p>
                    <div class="prompt-box">export function useDocuments(folderId?: string | null) {
                        return useQuery({
                        queryKey: folderId !== undefined ? docKeys.byFolder(folderId) : docKeys.all,
                        queryFn: async () => {
                        const docs = await DataService.getDocuments(folderId)
                        try {
                        const validDocs = docs.map(d => DocumentSchema.parse(d))
                        return validDocs
                        } catch (error) {
                        console.error("Validation error", error)
                        return docs as Document[]
                        }
                        }
                        })
                        }</div>
                </div>
                <div class="card">
                    <span class="tag tag-feature">Carpetas</span>
                    <h3>Navegaci√≥n Jer√°rquica</h3>
                    <p>Sistema de carpetas con breadcrumbs, drag & drop de archivos, y soporte para ZIP.</p>
                </div>
                <div class="card">
                    <span class="tag tag-feature">Papelera</span>
                    <h3>Soft Delete</h3>
                    <p>Los archivos eliminados van a papelera antes de borrado permanente, con opci√≥n de restaurar.</p>
                    <div class="prompt-box"> async moveToTrash(item: Document | Folder, type: 'document' | 'folder') {
                        const trashItem: TrashItem = {
                        id: crypto.randomUUID(),
                        originalId: item.id,
                        originalType: type,
                        data: item,
                        deletedAt: new Date()
                        }

                        const trash = await this.getAllTrash()
                        trash.push(trashItem)
                        await this.saveAllTrash(trash)

                        // Remove from original location
                        if (type === 'document') {
                        await this.deleteDocument(item.id)
                        } else {
                        await this.deleteFolder(item.id)
                        // Also move all documents in this folder to trash
                        const docs = await this.getDocumentsByFolder(item.id)
                        for (const doc of docs) {
                        await this.moveToTrash(doc, 'document')
                        }
                        }
                        },</div>
                </div>
            </div>

            <h2>üìù Editores y Visores</h2>
            <div class="grid">
                <div class="card">
                    <span class="tag tag-feature">Monaco</span>
                    <h3>Editor de C√≥digo Avanzado</h3>
                    <p>Syntax highlighting, ejecuci√≥n de c√≥digo en la nube (Piston API), consola integrada con
                        logs/errores, autocompletado inteligente y plantillas (boilerplates) autom√°ticas.</p>
                    <div class="prompt-box"> const runCode = async () => {
                        if (!content) return

                        const supportedLangs = Object.keys(PISTON_LANGUAGES)
                        if (!supportedLangs.includes(language)) {
                        toast.error(`Ejecuci√≥n no soportada para ${language}. Intenta cambiar de lenguaje.`)
                        return
                        }

                        setIsRunning(true)
                        setShowOutput(true)
                        setOutput(null)

                        // ...

                        try {
                        const res = await fetch('https://emkc.org/api/v2/piston/execute', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                        language: pistLang,
                        version: '*',
                        files: [{ content }]
                        })
                        })
                        // ... handle response ...
                        } catch (e) {
                        setOutput('Error de conexi√≥n con la API de ejecuci√≥n')
                        toast.error('Error de red')
                        } finally {
                        setIsRunning(false)
                        }
                        }</div>
                </div>
                <div class="card">
                    <span class="tag tag-feature">Media</span>
                    <h3>Editor Multimedia</h3>
                    <p>Ajustes de brillo, contraste, saturaci√≥n y rotaci√≥n para im√°genes y videos.</p>
                </div>
                <div class="card">
                    <span class="tag tag-feature">Visor</span>
                    <h3>Visor Universal</h3>
                    <p>Soporte para: Image, Video, Audio, PDF, Excel, CSV, Markdown, JSON, HTML, Code, Text.</p>
                </div>
            </div>

            <h2>‚òÅÔ∏è Cloud y Autenticaci√≥n</h2>
            <div class="grid">
                <div class="card">
                    <span class="tag tag-feature">Supabase</span>
                    <h3>Sincronizaci√≥n</h3>
                    <p>Subir/descargar datos de la nube, borrar nube, indicador de conexi√≥n.</p>
                    <div class="prompt-box">export async function syncLocalToCloud(
                        documents: Document[],
                        folders: Folder[],
                        trash: TrashItem[]
                        ): Promise<{ success: boolean; errors: string[] }> {
                            if (!supabase) {
                            return { success: false, errors: ['Supabase no configurado'] }
                            }

                            const errors: string[] = []

                            // Sync folders first (for foreign key references)
                            for (const folder of folders) {
                            const result = await createFolder(folder)
                            if (!result) errors.push(`Error syncing folder: ${folder.name}`)
                            }

                            // Sync documents
                            for (const doc of documents) {
                            const result = await createDocument(doc)
                            if (!result) errors.push(`Error syncing document: ${doc.title}`)
                            }

                            // ...
                            return { success: errors.length === 0, errors }
                            }</div>
                </div>
                <div class="card">
                    <span class="tag tag-feature">Auth</span>
                    <h3>Login</h3>
                    <p>Email/contrase√±a y Google OAuth integrados con Supabase Auth.</p>
                </div>
                <div class="card">
                    <span class="tag tag-feature">Config</span>
                    <h3>Sync Unificado</h3>
                    <p>Panel de configuraci√≥n unificado para modo de sincronizaci√≥n (Manual/Auto) y estado de la nube
                        con timer autom√°tico.</p>
                </div>
            </div>

            <h2>üé® UI/UX</h2>
            <div class="grid">
                <div class="card">
                    <span class="tag tag-feature">Responsive</span>
                    <h3>Sidebar Colapsable</h3>
                    <p>Oculta por defecto, aparece con hover en desktop o hamburger menu en m√≥vil.</p>
                </div>
                <div class="card">
                    <span class="tag tag-feature">Tema</span>
                    <h3>Dark/Light Mode</h3>
                    <p>Toggle en configuraci√≥n con persistencia.</p>
                </div>
                <div class="card">
                    <span class="tag tag-feature">Control</span>
                    <h3>Guardado Manual</h3>
                    <p>Modo de guardado expl√≠cito para c√≥digo con indicador de cambios no guardados (dirty state) y
                        protecci√≥n contra cierre accidental.</p>
                    <div class="prompt-box"> // Warn on exit if dirty
                        useEffect(() => {
                        const handleBeforeUnload = (e: BeforeUnloadEvent) => {
                        if (isDirty) {
                        e.preventDefault()
                        e.returnValue = ''
                        }
                        }
                        window.addEventListener('beforeunload', handleBeforeUnload)
                        return () => window.removeEventListener('beforeunload', handleBeforeUnload)
                        }, [isDirty])</div>
                </div>
                <div class="card">
                    <span class="tag tag-feature">Optimista</span>
                    <h3>Updates Instant√°neos</h3>
                    <p>Las acciones se reflejan inmediatamente en UI antes de confirmar en backend.</p>
                </div>
            </div>
        </section>

        <!-- FILES -->
        <section id="files">
            <h1>Archivos del Proyecto</h1>
            <p class="subtitle">Estructura de archivos creados y modificados</p>

            <div class="file-tree">
                <span class="folder">üìÇ MultiDocApp/App/src/</span>
                ‚îú‚îÄ‚îÄ <span class="folder">üìÇ components/</span>
                ‚îÇ ‚îú‚îÄ‚îÄ <span class="file-modified">Breadcrumb.tsx</span> - Navegaci√≥n de ruta actual
                ‚îÇ ‚îú‚îÄ‚îÄ <span class="file-modified">CreateDocumentDialog.tsx</span> - Modal crear documento
                ‚îÇ ‚îú‚îÄ‚îÄ <span class="file-modified">Dashboard.tsx</span> - Vista principal con filtros
                ‚îÇ ‚îú‚îÄ‚îÄ <span class="file-modified">DocumentCard.tsx</span> - Tarjeta de documento
                ‚îÇ ‚îú‚îÄ‚îÄ <span class="file-modified">Editor.tsx</span> - Contenedor de editores
                ‚îÇ ‚îú‚îÄ‚îÄ <span class="file-modified">FileUploader.tsx</span> - Drag & drop upload
                ‚îÇ ‚îú‚îÄ‚îÄ <span class="file-new">FolderCard.tsx</span> - Tarjeta de carpeta
                ‚îÇ ‚îú‚îÄ‚îÄ <span class="file-modified">Layout.tsx</span> - Sidebar colapsable
                ‚îÇ ‚îú‚îÄ‚îÄ <span class="file-modified">Settings.tsx</span> - Cloud sync y auth
                ‚îÇ ‚îú‚îÄ‚îÄ <span class="file-new">TrashPage.tsx</span> - Vista de papelera
                ‚îÇ ‚îú‚îÄ‚îÄ <span class="folder">üìÇ editors/</span>
                ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ <span class="file-modified">CodeEditor.tsx</span> - Monaco con font responsive
                ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ <span class="file">ImageViewer.tsx</span>
                ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ <span class="file-new">MediaEditor.tsx</span> - Editor brillo/contraste
                ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ <span class="file-modified">PDFViewer.tsx</span>
                ‚îÇ ‚îî‚îÄ‚îÄ <span class="folder">üìÇ viewers/</span>
                ‚îÇ ‚îú‚îÄ‚îÄ <span class="file-new">AudioViewer.tsx</span>
                ‚îÇ ‚îú‚îÄ‚îÄ <span class="file-new">CSVViewer.tsx</span>
                ‚îÇ ‚îú‚îÄ‚îÄ <span class="file-new">ExcelViewer.tsx</span>
                ‚îÇ ‚îú‚îÄ‚îÄ <span class="file-new">HTMLViewer.tsx</span>
                ‚îÇ ‚îú‚îÄ‚îÄ <span class="file-new">JSONViewer.tsx</span>
                ‚îÇ ‚îú‚îÄ‚îÄ <span class="file-modified">MarkdownViewer.tsx</span>
                ‚îÇ ‚îî‚îÄ‚îÄ <span class="file-new">VideoViewer.tsx</span>
                ‚îú‚îÄ‚îÄ <span class="folder">üìÇ hooks/</span>
                ‚îÇ ‚îî‚îÄ‚îÄ <span class="file-modified">useDocuments.ts</span> - React Query con optimistic updates
                ‚îú‚îÄ‚îÄ <span class="folder">üìÇ lib/</span>
                ‚îÇ ‚îú‚îÄ‚îÄ <span class="file-modified">db.ts</span> - LocalDB con trash management
                ‚îÇ ‚îú‚îÄ‚îÄ <span class="file-modified">schemas.ts</span> - Zod schemas expandidos
                ‚îÇ ‚îú‚îÄ‚îÄ <span class="file-modified">supabase.ts</span> - CRUD completo para cloud
                ‚îÇ ‚îî‚îÄ‚îÄ <span class="file">transformer.ts</span>
                ‚îî‚îÄ‚îÄ <span class="folder">üìÇ store/</span>
                ‚îî‚îÄ‚îÄ <span class="file">useStore.ts</span> - Zustand store

                <span class="file-new">üü¢ = Archivo nuevo</span> <span class="file-modified">üîµ = Modificado</span>
                <span class="file">‚ö™ = Sin cambios</span>
            </div>

            <h2>Configuraci√≥n</h2>
            <table>
                <tr>
                    <th>Archivo</th>
                    <th>Prop√≥sito</th>
                </tr>
                <tr>
                    <td><code>.env.local</code></td>
                    <td>Variables Supabase (VITE_SUPABASE_URL, VITE_SUPABASE_ANON_KEY)</td>
                </tr>
                <tr>
                    <td><code>vite.config.ts</code></td>
                    <td>Configuraci√≥n de Vite</td>
                </tr>
                <tr>
                    <td><code>tailwind.config.js</code></td>
                    <td>Tema y colores personalizados</td>
                </tr>
                <tr>
                    <td><code>tsconfig.json</code></td>
                    <td>TypeScript config</td>
                </tr>
            </table>
        </section>

        <!-- TECH -->
        <section id="tech">
            <h1>Stack Tecnol√≥gico</h1>
            <p class="subtitle">Frameworks, librer√≠as e inteligencia artificial utilizados</p>

            <h2>ü§ñ Inteligencia Artificial</h2>
            <table>
                <tr>
                    <th>Herramienta</th>
                    <th>Uso</th>
                </tr>
                <tr>
                    <td><span class="tag tag-ai">Gemini (Antigravity)</span></td>
                    <td>Generaci√≥n de c√≥digo, debugging, documentaci√≥n, arquitectura</td>
                </tr>
            </table>

            <h2>‚öõÔ∏è Frontend Framework</h2>
            <table>
                <tr>
                    <th>Tecnolog√≠a</th>
                    <th>Versi√≥n</th>
                    <th>Uso</th>
                </tr>
                <tr>
                    <td><span class="tag tag-tech">React</span></td>
                    <td>18.x</td>
                    <td>UI Components</td>
                </tr>
                <tr>
                    <td><span class="tag tag-tech">TypeScript</span></td>
                    <td>5.x</td>
                    <td>Type safety</td>
                </tr>
                <tr>
                    <td><span class="tag tag-tech">Vite</span></td>
                    <td>5.x</td>
                    <td>Build tool / Dev server</td>
                </tr>
            </table>

            <h2>üì¶ Librer√≠as Principales</h2>
            <table>
                <tr>
                    <th>Librer√≠a</th>
                    <th>Prop√≥sito</th>
                </tr>
                <tr>
                    <td><span class="tag tag-tech">TanStack Query</span></td>
                    <td>Server state management, caching, optimistic updates</td>
                </tr>
                <tr>
                    <td><span class="tag tag-tech">TanStack Router</span></td>
                    <td>File-based routing</td>
                </tr>
                <tr>
                    <td><span class="tag tag-tech">Zustand</span></td>
                    <td>Client state management</td>
                </tr>
                <tr>
                    <td><span class="tag tag-tech">Zod</span></td>
                    <td>Schema validation</td>
                </tr>
                <tr>
                    <td><span class="tag tag-tech">Framer Motion</span></td>
                    <td>Animations</td>
                </tr>
                <tr>
                    <td><span class="tag tag-tech">Monaco Editor</span></td>
                    <td>Code editing con syntax highlighting</td>
                </tr>
                <tr>
                    <td><span class="tag tag-tech">Radix UI</span></td>
                    <td>Accessible primitives (Dialog, Dropdown, etc.)</td>
                </tr>
                <tr>
                    <td><span class="tag tag-tech">Lucide React</span></td>
                    <td>Icons</td>
                </tr>
                <tr>
                    <td><span class="tag tag-tech">Sonner</span></td>
                    <td>Toast notifications</td>
                </tr>
            </table>

            <h2>üìÑ Procesamiento de Documentos</h2>
            <table>
                <tr>
                    <th>Librer√≠a</th>
                    <th>Tipo de archivo</th>
                </tr>
                <tr>
                    <td><span class="tag tag-tech">react-pdf</span></td>
                    <td>PDF viewer</td>
                </tr>
                <tr>
                    <td><span class="tag tag-tech">xlsx</span></td>
                    <td>Excel (.xlsx, .xls)</td>
                </tr>
                <tr>
                    <td><span class="tag tag-tech">papaparse</span></td>
                    <td>CSV parsing</td>
                </tr>
                <tr>
                    <td><span class="tag tag-tech">marked</span></td>
                    <td>Markdown rendering</td>
                </tr>
                <tr>
                    <td><span class="tag tag-tech">jszip</span></td>
                    <td>ZIP extraction</td>
                </tr>
            </table>

            <h2>‚òÅÔ∏è Backend / Database</h2>
            <table>
                <tr>
                    <th>Servicio</th>
                    <th>Uso</th>
                </tr>
                <tr>
                    <td><span class="tag tag-tech">Supabase</span></td>
                    <td>PostgreSQL database + REST API</td>
                </tr>
                <tr>
                    <td><span class="tag tag-tech">Supabase Auth</span></td>
                    <td>Email/Password + OAuth (Google)</td>
                </tr>
                <tr>
                    <td><span class="tag tag-tech">IndexedDB</span></td>
                    <td>Local storage (via idb-keyval)</td>
                </tr>
            </table>

            <h2>üé® Styling</h2>
            <table>
                <tr>
                    <th>Tecnolog√≠a</th>
                    <th>Uso</th>
                </tr>
                <tr>
                    <td><span class="tag tag-tech">Tailwind CSS</span></td>
                    <td>Utility-first CSS</td>
                </tr>
                <tr>
                    <td><span class="tag tag-tech">CSS Variables</span></td>
                    <td>Theming (dark/light mode)</td>
                </tr>
            </table>
        </section>
    </main>

    <script>
        function showSection(id) {
            document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('nav a').forEach(a => a.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.querySelector(`nav a[href="#${id}"]`).classList.add('active');
        }
        if (location.hash) showSection(location.hash.slice(1));
    </script>
</body>

</html>